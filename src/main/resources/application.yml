# Zoom Meeting Transcriber Application Configuration

spring:
  application:
    name: Zoom Meeting Transcriber
    version: 1.0.0
    
  # Database Configuration
  datasource:
    url: jdbc:mysql://localhost:3306/zoom_transcriber
    username: ${DB_USERNAME:zoomtranscriber}
    password: ${DB_PASSWORD:password}
    driver-class: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      
  # JPA Configuration
  jpa:
    hibernate:
      ddl-auto: update
      show-sql: false
      properties:
        hibernate:
          dialect: org.hibernate.dialect.MySQLDialect
          format_sql: true
          
  # WebFlux Configuration
  webflux:
    base-path: /api/v1
    
  # Jackson Configuration for JSON processing
  jackson:
    serialization:
      write-dates-as-timestamps: false
      date-format: yyyy-MM-dd'T'HH:mm:ss
    deserialization:
      fail-on-unknown-properties: false
      
  # Logging Configuration
  output:
    ansi:
      enabled: always
    pattern:
      console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
      file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file:
      name: logs/zoom-transcriber.log
      max-size: 10MB
      max-history: 30
      
# Application-specific Configuration
app:
  # Audio Configuration
  audio:
    buffer-size-ms: 100
    overlap-ms: 50
    sample-rate: 16000
    bit-depth: 16
    channels: 1
    max-file-size-mb: 100
    
  # Transcription Configuration
  transcription:
    confidence-threshold: 0.7
    max-segment-length: 10000
    latency-target-ms: 3000
    
  # Ollama Configuration
  ollama:
    host: localhost
    port: 11434
    model: qwen2.5:0.5b
    timeout-ms: 30000
    max-retry-attempts: 3
    
  # Performance Configuration
  performance:
    max-cpu-usage-percent: 80
    max-memory-mb: 1024
    monitoring-enabled: true
    
  # Installation Configuration
  installation:
    auto-install-java: true
    auto-install-ollama: true
    java-version: 21
    ollama-version: latest
    
  # UI Configuration
  ui:
    theme: default
    auto-save-interval-min: 5
    show-confidence-scores: true
    font-size: 12
    
  # Security Configuration
  security:
    encrypt-sensitive-config: true
    session-timeout-min: 30
    
---
# Development Profile Configuration
---
spring:
  config:
    activate: on-dev
    
  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=MySQL
    username: sa
    password: 
    
  jpa:
    hibernate:
      ddl-auto: create-drop
      show-sql: true
      
  # Override with environment variables for development
app:
  audio:
    device-name: MockAudioDevice
    
  ollama:
    host: ${OLLAMA_HOST:localhost}
    port: ${OLLAMA_PORT:11434}
    model: ${OLLAMA_MODEL:qwen2.5:0.5b}
    
  performance:
    monitoring-enabled: false